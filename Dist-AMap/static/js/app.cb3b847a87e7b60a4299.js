webpackJsonp([1],{"+aT9":function(t,e){t.exports=AMap},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r,a,o=i("VU/8")({name:"App"},n,!1,function(t){i("gNwa")},null,null).exports,c=i("/ocq"),l=i("mvHQ"),d=i.n(l),u=i("+aT9"),p=i.n(u),v=i("lDdF"),f=i.n(v),h={name:"aMap",data:function(){return{geoBounds:[],bounds:[],province:"",city:"",district:"",street:"",provinceList:[],cityList:[],districtList:[],streetList:[],marsCood:!0}},methods:{init:function(){(r=new p.a.Map("amap-container",{zoom:14,mapStyle:"amap://styles/whitesmoke"})).setCenter([116.397428,39.90923]),p.a.service("AMap.DistrictSearch",function(){a=new p.a.DistrictSearch({subdistrict:1,showbiz:!1})}),this.searchDistrict("中国")},getData:function(t,e,i){var s=this;if(e&&s.clearSelectList(e),t.boundaries){s.geoBounds.push({name:t.name,boundaries:t.boundaries});for(var n=t.boundaries.length,a=0;a<n;a++){new p.a.Polygon({strokeWeight:1,strokeColor:"#CC66CC",fillColor:"#CCF3FF",fillOpacity:.5,path:t.boundaries[a]}).setMap(r)}r.setFitView()}i||s.addSubList(t.adcode,t.districtList)},clearSelectList:function(t){var e=this;"province"===t?(e.cityList=[],e.city="",e.districtList=[],e.district="",e.streetList=[],e.street=""):"city"===t?(e.districtList=[],e.district="",e.streetList=[],e.street=""):"district"===t&&(e.streetList=[],e.street="")},addSubList:function(t,e){var i=this,s=e[0].level,n={adcode:t,name:"= 全部 ="};"province"===s?i.provinceList=e:"city"===s?(i.cityList=e,i.cityList.unshift(n)):"district"===s?(i.districtList=e,i.districtList.unshift(n)):"street"===s&&(i.streetList=e,i.streetList.unshift(n))},search:function(t,e){var i=this;if(r.clearMap(),i.geoBounds=[],a.setLevel(e),a.setExtensions("all"),"city"===e&&t.endsWith("0000"))for(var s=1;s<i.cityList.length;s++){var n=i.cityList[s].adcode;i.searchDistrict(n,e,!0)}else if("district"===e&&t.endsWith("00"))for(var o=1;o<i.districtList.length;o++){var c=i.districtList[o].adcode;i.searchDistrict(c,e,!0)}else i.searchDistrict(t,e,!1)},searchDistrict:function(t,e,i){var s=this,n=s.$loading({});a.search(t,function(t,r){n.close(),"complete"===t&&s.getData(r.districtList[0],e,i)})},downloadGeoJson:function(){var t=this,e=t.geoBounds;if(0!==e.length){var i=t.getGeoJson(e),s=new Blob([d()(i)],{type:"text/plain;charset=utf-8"});f.a.saveAs(s,"coods.json")}else t.$message({type:"error",center:!0,message:"当前未选择城市，无法下载"})},getGeoJson:function(t){for(var e={type:"FeatureCollection",features:[]},i=0;i<t.length;i++){var s=t[i],n=[],r={type:"Feature",properties:{name:s.name},geometry:{type:"Polygon",coordinates:[n]}},a=s.boundaries;if(a.length>1){r.geometry.type="MultiPolygon";for(var o=0;o<a.length;o++){n[o]=[];for(var c=0;c<a[o].length;c++){var l=a[o][c];n[o].push([l.lng,l.lat])}}}else for(var d=0;d<a[0].length;d++){var u=a[0][d];n.push([u.lng,u.lat])}e.features.push(r)}return e},convert:function(){this.$message({center:!0,message:"敬请期待..."})}},mounted:function(){this.init()}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{attrs:{id:"amap-container"}}),t._v(" "),i("div",{staticClass:"citySelect-container"},[i("el-row",[i("el-select",{attrs:{placeholder:"请选择省"},on:{change:function(e){t.search(t.province,"province")}},model:{value:t.province,callback:function(e){t.province=e},expression:"province"}},t._l(t.provinceList,function(t){return i("el-option",{key:t.adcode,attrs:{label:t.name,value:t.adcode}})}))],1),t._v(" "),i("el-row",[i("el-select",{attrs:{placeholder:"请选择市"},on:{change:function(e){t.search(t.city,"city")}},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}},t._l(t.cityList,function(t){return i("el-option",{key:t.adcode,attrs:{label:t.name,value:t.adcode}})}))],1),t._v(" "),i("el-row",[i("el-select",{attrs:{placeholder:"请选择区"},on:{change:function(e){t.search(t.district,"district")}},model:{value:t.district,callback:function(e){t.district=e},expression:"district"}},t._l(t.districtList,function(t){return i("el-option",{key:t.adcode,attrs:{label:t.name,value:t.adcode}})}))],1),t._v(" "),i("el-row",[i("el-select",{attrs:{placeholder:"请选择街道"},on:{change:function(e){t.search(t.street,"street")}},model:{value:t.street,callback:function(e){t.street=e},expression:"street"}},t._l(t.streetList,function(t){return i("el-option",{key:t.adcode,attrs:{label:t.name,value:t.adcode}})}))],1),t._v(" "),i("el-row",{staticStyle:{"text-align":"right"},attrs:{type:"flex",justify:"space-between"}},[i("el-col",{attrs:{span:12}},[i("el-checkbox",{attrs:{label:"火星坐标",border:""},on:{change:t.convert},model:{value:t.marsCood,callback:function(e){t.marsCood=e},expression:"marsCood"}})],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.downloadGeoJson}},[t._v("下 载")])],1)],1)],1)])},staticRenderFns:[]};var y=i("VU/8")(h,m,!1,function(t){i("SXj5")},"data-v-d9b5c666",null).exports;s.default.use(c.a);var g=new c.a({routes:[{path:"/",name:"aMap",component:y}]}),L=i("zL8q"),b=i.n(L);i("tvR6");s.default.config.productionTip=!1,s.default.use(b.a),new s.default({el:"#app",router:g,components:{App:o},template:"<App/>"})},SXj5:function(t,e){},gNwa:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.cb3b847a87e7b60a4299.js.map