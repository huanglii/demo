webpackJsonp([1],{"+aT9":function(e,t){e.exports=AMap},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var n,s,o=i("VU/8")({name:"App"},r,!1,function(e){i("gNwa")},null,null).exports,c=i("/ocq"),l=i("mvHQ"),u=i.n(l),d=i("+aT9"),p=i.n(d),v=i("lDdF"),f=i.n(v),h={name:"aMap",data:function(){return{bounds:[],province:"",city:"",district:"",street:"",provinceList:[],cityList:[],districtList:[],streetList:[],fileName:"",curLevel:"",lowerCity:!1}},methods:{init:function(){(n=new p.a.Map("amap-container",{zoom:14,mapStyle:"amap://styles/whitesmoke"})).setCenter([116.397428,39.90923]),p.a.service("AMap.DistrictSearch",function(){s=new p.a.DistrictSearch({subdistrict:1,showbiz:!1})});var e=this;s.search("中国",function(t,i){"complete"===t&&e.getData(i.districtList[0])})},getData:function(e,t){var i=this;if(t&&(i.fileName=e.name,i.clearSelectList(t)),i.bounds=e.boundaries,i.bounds){for(var a=i.bounds.length,r=0;r<a;r++){new p.a.Polygon({strokeWeight:1,strokeColor:"#CC66CC",fillColor:"#CCF3FF",fillOpacity:.5,path:i.bounds[r]}).setMap(n)}n.setFitView()}var s=e.districtList;if(s){var o=s[0].level;"province"===o?i.provinceList=s:"city"===o?i.cityList=s:"district"===o?i.districtList=s:"street"===o&&(i.streetList=s)}},clearSelectList:function(e){var t=this;"province"===e?(t.cityList=[],t.city="",t.districtList=[],t.district="",t.streetList=[],t.street=""):"city"===e?(t.districtList=[],t.district="",t.streetList=[],t.street=""):"district"===e&&(t.streetList=[],t.street="")},search:function(e,t){var i=this;i.curLevel=t,n.clearMap(),s.setLevel(t),s.setExtensions("all"),s.search(e,function(e,a){"complete"===e&&i.getData(a.districtList[0],t)})},downloadGeo:function(){var e=this,t=e.bounds;if(t){var i=[],a={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[i]}}]};if(e.lowerCity,t.length>1){a.features[0].geometry.type="MultiPolygon";for(var r=0;r<t.length;r++){i[r]=[];for(var n=0;n<t[r].length;n++){var s=t[r][n];i[r].push([s.lng,s.lat])}}}else for(var o=0;o<t[0].length;o++){var c=t[0][o];i.push([c.lng,c.lat])}var l=new Blob([u()(a)],{type:"text/plain;charset=utf-8"});f.a.saveAs(l,e.fileName+".json")}else e.$message({type:"error",showClose:!0,center:!0,message:"当前未选择城市，无法下载"})}},mounted:function(){this.init()}},y={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{attrs:{id:"amap-container"}}),e._v(" "),i("div",{staticClass:"citySelect-container"},[i("el-row",[i("el-select",{attrs:{placeholder:"请选择省"},on:{change:function(t){e.search(e.province,"province")}},model:{value:e.province,callback:function(t){e.province=t},expression:"province"}},e._l(e.provinceList,function(e){return i("el-option",{key:e.adcode,attrs:{label:e.name,value:e.adcode}})}))],1),e._v(" "),i("el-row",[i("el-select",{attrs:{placeholder:"请选择市"},on:{change:function(t){e.search(e.city,"city")}},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}},e._l(e.cityList,function(e){return i("el-option",{key:e.adcode,attrs:{label:e.name,value:e.adcode}})}))],1),e._v(" "),i("el-row",[i("el-select",{attrs:{placeholder:"请选择区"},on:{change:function(t){e.search(e.district,"district")}},model:{value:e.district,callback:function(t){e.district=t},expression:"district"}},e._l(e.districtList,function(e){return i("el-option",{key:e.adcode,attrs:{label:e.name,value:e.adcode}})}))],1),e._v(" "),i("el-row",[i("el-select",{attrs:{placeholder:"请选择街道"},on:{change:function(t){e.search(e.street,"street")}},model:{value:e.street,callback:function(t){e.street=t},expression:"street"}},e._l(e.streetList,function(e){return i("el-option",{key:e.adcode,attrs:{label:e.name,value:e.adcode}})}))],1),e._v(" "),i("el-row",{staticStyle:{"text-align":"right"},attrs:{type:"flex",justify:"space-between"}},[i("el-col",{attrs:{span:12}},[i("el-checkbox",{attrs:{disabled:"",label:"下级城市",border:""},model:{value:e.lowerCity,callback:function(t){e.lowerCity=t},expression:"lowerCity"}})],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.downloadGeo}},[e._v("下 载")])],1)],1)],1)])},staticRenderFns:[]};var m=i("VU/8")(h,y,!1,function(e){i("hlCm")},"data-v-ad2e6d3a",null).exports;a.default.use(c.a);var w=new c.a({routes:[{path:"/",name:"aMap",component:m}]}),b=i("zL8q"),g=i.n(b);i("tvR6");a.default.config.productionTip=!1,a.default.use(g.a),new a.default({el:"#app",router:w,components:{App:o},template:"<App/>"})},gNwa:function(e,t){},hlCm:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.1173409d2788db5ce465.js.map