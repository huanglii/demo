webpackJsonp([1],{"+aT9":function(t,e){t.exports=AMap},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r,s,c=i("VU/8")({name:"App"},a,!1,function(t){i("gNwa")},null,null).exports,o=i("/ocq"),l=i("mvHQ"),u=i.n(l),d=i("+aT9"),p=i.n(d),v=i("lDdF"),f=i.n(v),h={name:"aMap",data:function(){return{bounds:[],province:"",city:"",district:"",street:"",provinceList:[],cityList:[],districtList:[],streetList:[],fileName:""}},methods:{init:function(){(r=new p.a.Map("amap-container",{zoom:14,mapStyle:"amap://styles/whitesmoke"})).setCenter([116.397428,39.90923]),p.a.service("AMap.DistrictSearch",function(){s=new p.a.DistrictSearch({subdistrict:1,showbiz:!1})});var t=this;s.search("中国",function(e,i){"complete"===e&&t.getData(i.districtList[0])})},getData:function(t,e){var i=this;if(e&&(i.fileName=t.name,i.clearSelectList(e)),i.bounds=t.boundaries,i.bounds){for(var n=i.bounds.length,a=0;a<n;a++){new p.a.Polygon({strokeWeight:1,strokeColor:"#CC66CC",fillColor:"#CCF3FF",fillOpacity:.5,path:i.bounds[a]}).setMap(r)}r.setFitView()}var s=t.districtList;if(s){var c=s[0].level;"province"===c?i.provinceList=s:"city"===c?i.cityList=s:"district"===c?i.districtList=s:"street"===c&&(i.streetList=s)}},clearSelectList:function(t){var e=this;"province"===t?(e.cityList=[],e.city="",e.districtList=[],e.district="",e.streetList=[],e.street=""):"city"===t?(e.districtList=[],e.district="",e.streetList=[],e.street=""):"district"===t&&(e.streetList=[],e.street="")},search:function(t,e){var i=this;r.clearMap(),s.setLevel(e),s.setExtensions("all"),s.search(t,function(t,n){"complete"===t&&i.getData(n.districtList[0],e)})},downloadGeo:function(){var t=this,e=t.bounds;if(e){var i=[],n={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[i]}}]};if(e.length>1){n.features.geometry.type="MultiPolygon";for(var a=0;a<e.length;a++){i[a]=[];for(var r=0;r<e[a].length;r++){var s=e[a][r];i[a].push([s.lng,s.lat])}}}else for(var c=0;c<e[0].length;c++){var o=e[0][c];i.push([o.lng,o.lat])}var l=new Blob([u()(n)],{type:"text/plain;charset=utf-8"});f.a.saveAs(l,t.fileName+".json")}else t.$message({type:"error",showClose:!0,center:!0,message:"当前未选择城市，无法下载"})}},mounted:function(){this.init()}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{attrs:{id:"amap-container"}}),t._v(" "),i("div",{staticClass:"citySelect-container"},[i("el-select",{attrs:{placeholder:"请选择省"},on:{change:function(e){t.search(t.province,"province")}},model:{value:t.province,callback:function(e){t.province=e},expression:"province"}},t._l(t.provinceList,function(t){return i("el-option",{key:t.adcode,attrs:{label:t.name,value:t.adcode}})})),t._v(" "),i("el-select",{attrs:{placeholder:"请选择市"},on:{change:function(e){t.search(t.city,"city")}},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}},t._l(t.cityList,function(t){return i("el-option",{key:t.adcode,attrs:{label:t.name,value:t.adcode}})})),t._v(" "),i("el-select",{attrs:{placeholder:"请选择区"},on:{change:function(e){t.search(t.district,"district")}},model:{value:t.district,callback:function(e){t.district=e},expression:"district"}},t._l(t.districtList,function(t){return i("el-option",{key:t.adcode,attrs:{label:t.name,value:t.adcode}})})),t._v(" "),i("el-select",{attrs:{placeholder:"请选择街道"},on:{change:function(e){t.search(t.street,"street")}},model:{value:t.street,callback:function(e){t.street=e},expression:"street"}},t._l(t.streetList,function(t){return i("el-option",{key:t.adcode,attrs:{label:t.name,value:t.adcode}})})),t._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.downloadGeo}},[t._v(t._s(t.fileName||"下载"))])],1),t._v(" "),i("a",{attrs:{href:""}})])},staticRenderFns:[]};var y=i("VU/8")(h,m,!1,function(t){i("ypj+")},"data-v-96c18570",null).exports;n.default.use(o.a);var g=new o.a({routes:[{path:"/",name:"aMap",component:y}]}),L=i("zL8q"),b=i.n(L);i("tvR6");n.default.config.productionTip=!1,n.default.use(b.a),new n.default({el:"#app",router:g,components:{App:c},template:"<App/>"})},gNwa:function(t,e){},tvR6:function(t,e){},"ypj+":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.121a3c5f876448ffba47.js.map