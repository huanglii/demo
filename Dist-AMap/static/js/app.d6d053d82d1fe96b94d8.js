webpackJsonp([1],{"+aT9":function(t,e){t.exports=AMap},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s,a,c=n("VU/8")({name:"App"},r,!1,function(t){n("gNwa")},null,null).exports,o=n("/ocq"),l=n("mvHQ"),d=n.n(l),u=n("+aT9"),p=n.n(u),v=[],f={name:"aMap",data:function(){return{bounds:[],provinceIndex:"",cityIndex:"",districtIndex:"",streetIndex:"",city:"",district:"",street:"",provinceList:[],cityList:[],districtList:[],streetList:[],fileName:""}},methods:{init:function(){(s=new p.a.Map("amap-container",{center:[116.397428,39.90923]})).setZoom(14),p.a.service("AMap.DistrictSearch",function(){a=new p.a.DistrictSearch({subdistrict:1,showbiz:!1})});var t=this;a.search("中国",function(e,n){"complete"===e&&t.getData(n.districtList[0])})},getData:function(t,e){var n=this;if(e&&(n.fileName=t.name+".json"),n.bounds=[],n.bounds=t.boundaries,n.bounds){for(var i=n.bounds.length,r=0;r<i;r++){var a=new p.a.Polygon({map:s,strokeWeight:1,strokeColor:"#CC66CC",fillColor:"#CCF3FF",fillOpacity:.5,path:n.bounds[r]});v.push(a)}s.setFitView()}"province"===e?(n.cityList=[],n.districtList=[],n.streetList=[]):"city"===e?(n.districtList=[],n.streetList=[]):"district"===e&&(n.streetList=[]);var c=t.districtList;if(c){var o=c[0].level;"province"===o&&(n.provinceList=c),"city"===o&&(n.cityList=c),"district"===o&&(n.districtList=c),"street"===o&&(n.streetList=c)}},search:function(t,e){for(var n,i,r=this,s=0,c=v.length;s<c;s++)v[s].setMap(null);"province"===e&&(n=r.provinceList[t]),"city"===e&&(n=r.cityList[t]),"district"===e&&(n=r.districtList[t]),"street"===e&&(n=r.streetList[t]),i=n.adcode,a.setLevel(e),a.setExtensions("all"),a.search(i,function(t,n){"complete"===t&&r.getData(n.districtList[0],e)})},downloadGeo:function(){var t=this;if(t.bounds){var e=[],n={type:"Polygon",coordinates:[e]},i={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:n}]},r=t.bounds;if(r.length>1){n.type="MultiPolygon";for(var s=0;s<r.length;s++){var a=r[s];e[s]=[];for(var c=0;c<a.length;c++){var o=a[c];e[s].push([o.lng,o.lat])}}}else for(var l=r[0],u=0;u<l.length;u++){var p=l[u];e.push([p.lng,p.lat])}var v=new Blob([d()(i)],{type:"text/plain;charset=utf-8"});saveFile(v,t.fileName)}else t.$message({type:"error",showClose:!0,center:!0,message:"当前未选择城市，无法下载"})}},mounted:function(){this.init()}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{attrs:{id:"amap-container"}}),t._v(" "),n("div",{staticClass:"citySelect-container"},[n("el-select",{attrs:{placeholder:"请选择省"},on:{change:function(e){t.search(t.provinceIndex,"province")}},model:{value:t.provinceIndex,callback:function(e){t.provinceIndex=e},expression:"provinceIndex"}},t._l(t.provinceList,function(t,e){return n("el-option",{key:t.adcode,attrs:{label:t.name,value:e}})})),t._v(" "),n("el-select",{attrs:{placeholder:"请选择市"},on:{change:function(e){t.search(t.cityIndex,"city")}},model:{value:t.cityIndex,callback:function(e){t.cityIndex=e},expression:"cityIndex"}},t._l(t.cityList,function(t,e){return n("el-option",{key:t.adcode,attrs:{label:t.name,value:e}})})),t._v(" "),n("el-select",{attrs:{placeholder:"请选择区"},on:{change:function(e){t.search(t.districtIndex,"district")}},model:{value:t.districtIndex,callback:function(e){t.districtIndex=e},expression:"districtIndex"}},t._l(t.districtList,function(t,e){return n("el-option",{key:t.adcode,attrs:{label:t.name,value:e}})})),t._v(" "),n("el-select",{attrs:{placeholder:"请选择街道"},on:{change:function(e){t.search(t.streetIndex,"street")}},model:{value:t.streetIndex,callback:function(e){t.streetIndex=e},expression:"streetIndex"}},t._l(t.streetList,function(t,e){return n("el-option",{key:t.adcode,attrs:{label:t.name,value:e}})})),t._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.downloadGeo}},[t._v(t._s(t.fileName||"下载"))])],1),t._v(" "),n("a",{attrs:{href:""}})])},staticRenderFns:[]};var m=n("VU/8")(f,h,!1,function(t){n("u9tG")},"data-v-26c51ed1",null).exports;i.default.use(o.a);var y=new o.a({routes:[{path:"/",name:"aMap",component:m}]}),x=n("zL8q"),L=n.n(x);n("tvR6");i.default.config.productionTip=!1,i.default.use(L.a),new i.default({el:"#app",router:y,components:{App:c},template:"<App/>"})},gNwa:function(t,e){},tvR6:function(t,e){},u9tG:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d6d053d82d1fe96b94d8.js.map