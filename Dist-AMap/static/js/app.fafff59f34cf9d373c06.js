webpackJsonp([1],{"+aT9":function(e,t){e.exports=AMap},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s,a,c=n("VU/8")({name:"App"},r,!1,function(e){n("gNwa")},null,null).exports,o=n("/ocq"),l=n("mvHQ"),d=n.n(l),u=n("+aT9"),p=n.n(u),v=n("lDdF"),f=n.n(v),h={name:"aMap",data:function(){return{bounds:[],provinceIndex:"",cityIndex:"",districtIndex:"",streetIndex:"",city:"",district:"",street:"",provinceList:[],cityList:[],districtList:[],streetList:[],fileName:""}},methods:{init:function(){(s=new p.a.Map("amap-container",{center:[116.397428,39.90923],mapStyle:"amap://styles/whitesmoke"})).setZoom(14),p.a.service("AMap.DistrictSearch",function(){a=new p.a.DistrictSearch({subdistrict:1,showbiz:!1})});var e=this;a.search("中国",function(t,n){"complete"===t&&e.getData(n.districtList[0])})},getData:function(e,t){var n=this;if(t&&(n.fileName=e.name+".json"),n.bounds=[],n.bounds=e.boundaries,n.bounds){for(var i=n.bounds.length,r=0;r<i;r++){new p.a.Polygon({strokeWeight:1,strokeColor:"#CC66CC",fillColor:"#CCF3FF",fillOpacity:.5,path:n.bounds[r]}).setMap(s)}s.setFitView()}"province"===t?(n.cityList=[],n.cityIndex="",n.districtList=[],n.districtIndex="",n.streetList=[],n.streetIndex=""):"city"===t?(n.districtList=[],n.districtIndex="",n.streetList=[],n.streetIndex=""):"district"===t&&(n.streetList=[],n.streetIndex="");var a=e.districtList;if(a){var c=a[0].level;"province"===c&&(n.provinceList=a),"city"===c&&(n.cityList=a),"district"===c&&(n.districtList=a),"street"===c&&(n.streetList=a)}},search:function(e,t){var n,i,r=this;s.clearMap(),"province"===t&&(n=r.provinceList[e]),"city"===t&&(n=r.cityList[e]),"district"===t&&(n=r.districtList[e]),"street"===t&&(n=r.streetList[e]),i=n.adcode,a.setLevel(t),a.setExtensions("all"),a.search(i,function(e,n){"complete"===e&&r.getData(n.districtList[0],t)})},downloadGeo:function(){var e=this;if(e.bounds){var t=[],n={type:"Polygon",coordinates:[t]},i={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:n}]},r=e.bounds;if(r.length>1){n.type="MultiPolygon";for(var s=0;s<r.length;s++){var a=r[s];t[s]=[];for(var c=0;c<a.length;c++){var o=a[c];t[s].push([o.lng,o.lat])}}}else for(var l=r[0],u=0;u<l.length;u++){var p=l[u];t.push([p.lng,p.lat])}var v=new Blob([d()(i)],{type:"text/plain;charset=utf-8"});f.a.saveAs(v,e.fileName)}else e.$message({type:"error",showClose:!0,center:!0,message:"当前未选择城市，无法下载"})}},mounted:function(){this.init()}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{attrs:{id:"amap-container"}}),e._v(" "),n("div",{staticClass:"citySelect-container"},[n("el-select",{attrs:{placeholder:"请选择省"},on:{change:function(t){e.search(e.provinceIndex,"province")}},model:{value:e.provinceIndex,callback:function(t){e.provinceIndex=t},expression:"provinceIndex"}},e._l(e.provinceList,function(e,t){return n("el-option",{key:e.adcode,attrs:{label:e.name,value:t}})})),e._v(" "),n("el-select",{attrs:{placeholder:"请选择市"},on:{change:function(t){e.search(e.cityIndex,"city")}},model:{value:e.cityIndex,callback:function(t){e.cityIndex=t},expression:"cityIndex"}},e._l(e.cityList,function(e,t){return n("el-option",{key:e.adcode,attrs:{label:e.name,value:t}})})),e._v(" "),n("el-select",{attrs:{placeholder:"请选择区"},on:{change:function(t){e.search(e.districtIndex,"district")}},model:{value:e.districtIndex,callback:function(t){e.districtIndex=t},expression:"districtIndex"}},e._l(e.districtList,function(e,t){return n("el-option",{key:e.adcode,attrs:{label:e.name,value:t}})})),e._v(" "),n("el-select",{attrs:{placeholder:"请选择街道"},on:{change:function(t){e.search(e.streetIndex,"street")}},model:{value:e.streetIndex,callback:function(t){e.streetIndex=t},expression:"streetIndex"}},e._l(e.streetList,function(e,t){return n("el-option",{key:e.adcode,attrs:{label:e.name,value:t}})})),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.downloadGeo}},[e._v(e._s(e.fileName||"下载"))])],1),e._v(" "),n("a",{attrs:{href:""}})])},staticRenderFns:[]};var m=n("VU/8")(h,y,!1,function(e){n("rMkl")},"data-v-6a6ff962",null).exports;i.default.use(o.a);var x=new o.a({routes:[{path:"/",name:"aMap",component:m}]}),L=n("zL8q"),I=n.n(L);n("tvR6");i.default.config.productionTip=!1,i.default.use(I.a),new i.default({el:"#app",router:x,components:{App:c},template:"<App/>"})},gNwa:function(e,t){},rMkl:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.fafff59f34cf9d373c06.js.map