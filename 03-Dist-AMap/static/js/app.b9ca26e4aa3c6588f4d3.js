webpackJsonp([1],{"+aT9":function(t,e){t.exports=AMap},"2GZP":function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),n=i("mvHQ"),r=i.n(n),a=i("+aT9"),c=i.n(a),o=i("cK3Q"),l=i("lDdF"),d=i.n(l),u=void 0,p=void 0,v=[],f={name:"DistAMap",data:function(){return{province:"",city:"",district:"",street:"",provinceList:[],cityList:[],districtList:[],streetList:[],toWGS:!1}},methods:{init:function(){(u=new c.a.Map("amap-container",{zoom:14,mapStyle:"amap://styles/whitesmoke"})).setCenter([116.397428,39.90923]),c.a.service("AMap.DistrictSearch",function(){p=new c.a.DistrictSearch({subdistrict:1,showbiz:!1})}),this.searchDistrict("中国")},getData:function(t,e,i){if(e&&this.clearSelectList(e),t.boundaries){v.push({code:t.adcode,name:t.name,boundaries:t.boundaries});for(var s=t.boundaries.length,n=0;n<s;n++){new c.a.Polygon({strokeWeight:1,strokeColor:"#CC66CC",fillColor:"#CCF3FF",fillOpacity:.5,path:t.boundaries[n]}).setMap(u)}u.setFitView()}i||this.addSubList(t.adcode,t.districtList)},clearSelectList:function(t){var e=this;"province"===t?(e.cityList=[],e.city="",e.districtList=[],e.district="",e.streetList=[],e.street=""):"city"===t?(e.districtList=[],e.district="",e.streetList=[],e.street=""):"district"===t&&(e.streetList=[],e.street="")},addSubList:function(t,e){var i=this,s=e[0].level,n={adcode:t,name:"全部"};"province"===s?(i.provinceList=e,i.provinceList.unshift(n)):"city"===s?(i.cityList=e,i.cityList.unshift(n)):"district"===s?(i.districtList=e,i.districtList.unshift(n)):"street"===s&&(i.streetList=e,i.streetList.unshift(n))},search:function(t,e){var i=this;if(u.clearMap(),v=[],p.setLevel(e),p.setExtensions("all"),"province"===e&&t.endsWith("100000"))for(var s=1;s<i.provinceList.length;s++){var n=i.provinceList[s].adcode;i.searchDistrict(n,e,!0)}else if("city"===e&&t.endsWith("0000"))for(var r=1;r<i.cityList.length;r++){var a=i.cityList[r].adcode;i.searchDistrict(a,e,!0)}else if("district"===e&&t.endsWith("00"))for(var c=1;c<i.districtList.length;c++){var o=i.districtList[c].adcode;i.searchDistrict(o,e,!0)}else i.searchDistrict(t,e,!1)},searchDistrict:function(t,e,i){var s=this,n=s.$loading({});p.search(t,function(t,r){n.close(),"complete"===t&&s.getData(r.districtList[0],e,i)})},downloadGeoJson:function(){var t=v;if(0!==t.length){var e=new Blob([r()(this.getGeoJson(t))],{type:"text/plain;charset=utf-8"});d.a.saveAs(e,"coods.geojson")}else this.$message({type:"error",center:!0,message:"当前未选择城市，无法下载"})},getGeoJson:function(t){for(var e={type:"FeatureCollection",features:[]},i=0;i<t.length;i++){var s=t[i],n={},r={code:s.code,name:s.name},a=s.boundaries;n=a.length>1?Object(o.multiPolygon)(this.getCoods(a),r):Object(o.polygon)(this.getCoods(a),r),e.features.push(n)}return e},getCoods:function(t){var e=[];if(t.length>1)for(var i=0;i<t.length;i++){e[i]=[];for(var s=0;s<t[i].length;s++){var n=t[i][s];e[i].push([n.lng,n.lat])}}else for(var r=0;r<t[0].length;r++){var a=t[0][r];e.push([a.lng,a.lat])}return[e]}},mounted:function(){this.init()}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{attrs:{id:"amap-container"}}),t._v(" "),i("div",{staticClass:"citySelect-container"},[i("el-row",[i("el-select",{attrs:{placeholder:"请选择省"},on:{change:function(e){return t.search(t.province,"province")}},model:{value:t.province,callback:function(e){t.province=e},expression:"province"}},t._l(t.provinceList,function(t){return i("el-option",{key:t.adcode,attrs:{label:t.name,value:t.adcode}})}),1)],1),t._v(" "),i("el-row",[i("el-select",{attrs:{placeholder:"请选择市"},on:{change:function(e){return t.search(t.city,"city")}},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}},t._l(t.cityList,function(t){return i("el-option",{key:t.adcode,attrs:{label:t.name,value:t.adcode}})}),1)],1),t._v(" "),i("el-row",[i("el-select",{attrs:{placeholder:"请选择区"},on:{change:function(e){return t.search(t.district,"district")}},model:{value:t.district,callback:function(e){t.district=e},expression:"district"}},t._l(t.districtList,function(t){return i("el-option",{key:t.adcode,attrs:{label:t.name,value:t.adcode}})}),1)],1),t._v(" "),i("el-row",[i("el-select",{attrs:{placeholder:"请选择街道"},on:{change:function(e){return t.search(t.street,"street")}},model:{value:t.street,callback:function(e){t.street=e},expression:"street"}},t._l(t.streetList,function(t){return i("el-option",{key:t.adcode,attrs:{label:t.name,value:t.adcode}})}),1)],1),t._v(" "),i("el-row",[i("el-col",{staticStyle:{"text-align":"left"},attrs:{span:12}},[i("el-checkbox",{attrs:{label:"转WGS",border:"",disabled:""},model:{value:t.toWGS,callback:function(e){t.toWGS=e},expression:"toWGS"}})],1),t._v(" "),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.downloadGeoJson}},[t._v("下 载")])],1)],1)],1)])},staticRenderFns:[]};var m={name:"App",components:{DistAmap:i("VU/8")(f,h,!1,function(t){i("RN/X")},"data-v-48ecdbfb",null).exports}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("DistAmap")],1)},staticRenderFns:[]};var y=i("VU/8")(m,g,!1,function(t){i("2GZP")},null,null).exports,L=i("zL8q"),b=i.n(L);i("tvR6");s.default.config.productionTip=!1,s.default.use(b.a),new s.default({el:"#app",components:{App:y},template:"<App/>"})},"RN/X":function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b9ca26e4aa3c6588f4d3.js.map